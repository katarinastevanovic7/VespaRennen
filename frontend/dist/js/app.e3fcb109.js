(function(){"use strict";var e={628:function(e,t,s){var n=s(751),a=s(641);const o={class:"scale-wrapper"},r={class:"app-container text-center text-light"},i={class:"speed-row"};function p(e,t,s,n,p,l){const u=(0,a.g2)("TargetSpeedComponent"),c=(0,a.g2)("SpeedComponent"),d=(0,a.g2)("TimerComponent"),h=(0,a.g2)("MessageComponent");return(0,a.uX)(),(0,a.CE)("div",o,[(0,a.Lk)("div",r,[(0,a.Lk)("div",i,[(0,a.bF)(u,{targetSpeed:p.targetSpeedUpper,directionClass:"text-success"},null,8,["targetSpeed"]),(0,a.bF)(c,{speed:p.speedDisplay},null,8,["speed"]),(0,a.bF)(u,{targetSpeed:p.targetSpeedLower,directionClass:"text-danger"},null,8,["targetSpeed"])]),(0,a.bF)(d,{time:l.formattedTime,phase:p.phaseCounter,running:p.running,message:p.message,showMessage:p.showMessage,onStart:l.start,onStop:l.stop,onReset:l.reset,onPause:l.pause,onResume:l.resume,onCloseMessage:t[0]||(t[0]=e=>p.showMessage=!1)},null,8,["time","phase","running","message","showMessage","onStart","onStop","onReset","onPause","onResume"]),(0,a.bF)(h,{message:p.message,show:p.showMessage,onCloseMessage:t[1]||(t[1]=e=>p.showMessage=!1)},null,8,["message","show"])])])}var l=s(33);const u={class:"speed-display"},c={class:"speed"};function d(e,t,s,n,o,r){return(0,a.uX)(),(0,a.CE)("div",u,[(0,a.Lk)("span",c,(0,l.v_)(s.speed),1),t[0]||(t[0]=(0,a.Lk)("span",{class:"unit"},"km/h",-1))])}var h={props:["speed"]},g=s(262);const m=(0,g.A)(h,[["render",d]]);var v=m;const f={class:"value"};function b(e,t,s,n,o,r){return(0,a.uX)(),(0,a.CE)("div",{class:(0,l.C4)(["target-display",s.directionClass])},[(0,a.Lk)("span",f,(0,l.v_)(s.targetSpeed),1),t[0]||(t[0]=(0,a.Lk)("span",{class:"unit"},"km/h",-1))],2)}var S={props:["targetSpeed","directionClass"]};const C=(0,g.A)(S,[["render",b]]);var w=C;const k={class:"timer-container"},M={class:"timer-display"},y={class:"timer"},L={key:0,class:"phase-container"},I={class:"phase-number"},x={class:"button-row"},P=["disabled"],F={class:"stop-reset-row"},O=["disabled"],_={key:1,class:"modal-overlay"},T={class:"modal-box"},j={class:"modal-message"};function A(e,t,s,n,o,r){return(0,a.uX)(),(0,a.CE)("div",k,[(0,a.Lk)("div",M,[(0,a.Lk)("span",y,(0,l.v_)(s.time),1)]),void 0!==s.phase?((0,a.uX)(),(0,a.CE)("div",L,[(0,a.Lk)("span",I,"Phase: "+(0,l.v_)(s.phase),1)])):(0,a.Q3)("",!0),(0,a.Lk)("div",x,[(0,a.Lk)("button",{class:"btn btn-warning",onClick:t[0]||(t[0]=t=>e.$emit("start")),disabled:s.running},"Start",8,P),(0,a.Lk)("div",F,[(0,a.Lk)("button",{class:"btn btn-danger",onClick:t[1]||(t[1]=t=>e.$emit("stop")),disabled:!s.running},"Stop",8,O),(0,a.Lk)("button",{class:"btn btn-secondary",onClick:t[2]||(t[2]=t=>e.$emit("reset"))},"Reset")])]),s.showMessage?((0,a.uX)(),(0,a.CE)("div",_,[(0,a.Lk)("div",T,[(0,a.Lk)("button",{class:"close-btn",onClick:t[3]||(t[3]=t=>e.$emit("closeMessage"))},"√ó"),(0,a.Lk)("p",j,(0,l.v_)(s.message),1)])])):(0,a.Q3)("",!0)])}var E={props:{time:String,phase:Number,running:Boolean,message:String,showMessage:Boolean},emits:["start","stop","reset","pause","resume","closeMessage"]};const D=(0,g.A)(E,[["render",A],["__scopeId","data-v-102d598c"]]);var X=D;const $={key:0,class:"popup-overlay"},G={class:"popup-box"},R={class:"popup-text"};function B(e,t,s,n,o,r){return s.show?((0,a.uX)(),(0,a.CE)("div",$,[(0,a.Lk)("div",G,[(0,a.Lk)("button",{class:"close-btn",onClick:t[0]||(t[0]=t=>e.$emit("closeMessage"))},"√ó"),(0,a.Lk)("p",R,(0,l.v_)(s.message),1)])])):(0,a.Q3)("",!0)}var J={props:{message:String,show:Boolean}};const Q=(0,g.A)(J,[["render",B],["__scopeId","data-v-7c0d5839"]]);var U=Q;let q=null,N=null,Y=0,H=0;function z(){"geolocation"in navigator?(console.log("üìç GPS-Tracking gestartet..."),setInterval((()=>{navigator.geolocation.getCurrentPosition(V,W,{enableHighAccuracy:!0,timeout:5e3,maximumAge:0})}),500)):console.warn("‚ùå Geolocation nicht verf√ºgbar.")}function K(e,t,s,n){const a=6371,o=(s-e)*Math.PI/180,r=(n-t)*Math.PI/180,i=Math.sin(o/2)**2+Math.cos(e*Math.PI/180)*Math.cos(s*Math.PI/180)*Math.sin(r/2)**2,p=2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i));return a*p}function V(e){const{latitude:t,longitude:s,speed:n}=e.coords,a=Date.now();let o=n,r=0;if((null==n||n<=0)&&q&&N){const e=K(q.lat,q.lon,t,s),n=(a-N)/1e3;n>0&&e>0&&(o=e/n*1e3,r=1e3*e)}if(q){const e=K(q.lat,q.lon,t,s);r=1e3*e,Y+=r}if(q={lat:t,lon:s},N=a,N&&Y>0){const e=(a-N)/1e3;e>0&&(H=Y/e*3.6)}const i={latitude:t,longitude:s,speed:parseFloat((o||0).toFixed(2)),distance:parseFloat(Y.toFixed(1)),averageSpeed:parseFloat(H.toFixed(1))};console.log("üì§ Sende GPS-Daten:",i),fetch("https://vesparennen.onrender.com/api/gps/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).catch((e=>console.error("‚ùå Fehler beim Senden:",e)))}function W(e){console.error("‚ùå GPS-Fehler:",e.message,e)}var Z={components:{SpeedComponent:v,TargetSpeedComponent:w,TimerComponent:X,MessageComponent:U},data(){return{time:10,timerInterval:null,running:!1,paused:!1,distance:0,speedDisplay:"--",directionArrow:"",directionClass:"",showMessage:!1,message:"",phaseCounter:5,gpsStarted:!1,targetSpeedLower:null,targetSpeedUpper:null}},computed:{formattedTime(){const e=Math.floor(this.time/60).toString().padStart(2,"0"),t=(this.time%60).toString().padStart(2,"0");return`${e}:${t}`}},mounted(){setInterval((()=>{fetch("http://localhost:3000/api/gps/status").then((e=>e.json())).then((e=>{if(console.log("üì° GPS-Daten empfangen:",e),void 0!==e.speed){const t=3.6*e.speed;this.speedDisplay=t.toFixed(1)}})),fetch("http://localhost:3000/api/target-speed").then((e=>e.json())).then((e=>{null!==e.lower&&null!==e.upper&&(this.targetSpeedLower=e.lower,this.targetSpeedUpper=e.upper)}))}),400)},methods:{start(){if(this.running&&!this.paused)return;if(this.message="",this.showMessage=!1,this.paused)return void this.resume();this.gpsStarted||(z(),this.gpsStarted=!0),this.time=10,this.running=!0;let e=setInterval((()=>{this.time--,this.time<=0&&(clearInterval(e),this.time=300,this.phaseCounter=5,this.timerInterval=setInterval((()=>{if(this.time<=0)return this.message="You made it J√∂rg! üéâüõµ",this.showMessage=!0,void this.stop();this.time%30===0&&this.phaseCounter>0&&this.phaseCounter--,this.time--}),1e3))}),1e3)},stop(){clearInterval(this.timerInterval),this.running=!1,this.paused=!0},reset(){this.stop(),this.time=300,this.distance=0,this.running=!1,this.paused=!1,this.speedDisplay="--",this.directionArrow="",this.directionClass=""},pause(){this.running&&!this.paused&&(clearInterval(this.timerInterval),this.paused=!0,this.running=!1,this.message="‚è∏Ô∏è Pausiert")},resume(){this.paused&&(this.running=!0,this.paused=!1,this.timerInterval=setInterval((()=>{if(this.time<=0)return this.message="You made it J√∂rg! üéâüõµ",this.showMessage=!0,void this.stop();this.time%30===0&&this.phaseCounter>0&&this.phaseCounter--,this.time--}),1e3))}}};const ee=(0,g.A)(Z,[["render",p],["__scopeId","data-v-229b0764"]]);var te=ee;(0,n.Ef)(te).mount("#app")}},t={};function s(n){var a=t[n];if(void 0!==a)return a.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,s),o.exports}s.m=e,function(){var e=[];s.O=function(t,n,a,o){if(!n){var r=1/0;for(u=0;u<e.length;u++){n=e[u][0],a=e[u][1],o=e[u][2];for(var i=!0,p=0;p<n.length;p++)(!1&o||r>=o)&&Object.keys(s.O).every((function(e){return s.O[e](n[p])}))?n.splice(p--,1):(i=!1,o<r&&(r=o));if(i){e.splice(u--,1);var l=a();void 0!==l&&(t=l)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[n,a,o]}}(),function(){s.d=function(e,t){for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={524:0};s.O.j=function(t){return 0===e[t]};var t=function(t,n){var a,o,r=n[0],i=n[1],p=n[2],l=0;if(r.some((function(t){return 0!==e[t]}))){for(a in i)s.o(i,a)&&(s.m[a]=i[a]);if(p)var u=p(s)}for(t&&t(n);l<r.length;l++)o=r[l],s.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return s.O(u)},n=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=s.O(void 0,[504],(function(){return s(628)}));n=s.O(n)})();
//# sourceMappingURL=app.e3fcb109.js.map